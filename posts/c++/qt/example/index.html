<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Learning of Qt Official Examples :: Marco Epsilon</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content=".pro-anchor { width: 100%; } .pro-anchor-title { display:flex; flex-direction: row; width:100%; padding-bottom:10px; } .pro-anchor-icon { width:48px; height:48px; display:inline; vertical-align: middle; } .pro-anchor-title-content { display: inline; } .pro-anchor-separate { margin:auto 2px; border:1px darkcyan dashed; height: 1px; width:60%; vertical-align: middle; text-align: center; } .pro-anchor-title-action { width:32px; height:32px; margin: auto 4px; display:block; z-index: 10000; } .pro-anchor-content { display: none; } analogclock .sub-anchor-unit { padding-left: 15px; } .sub-anchor-unit-title { width:100%; display: flex; flex-direction: row;"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://marcoepsilon.github.io/posts/c&#43;&#43;/qt/example/" />


<link rel="stylesheet" href="https://marcoepsilon.github.io/assets/style.css">

  <link rel="stylesheet" href="https://marcoepsilon.github.io/assets/green.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://marcoepsilon.github.io/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://marcoepsilon.github.io/favicon/favicon.ico">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Learning of Qt Official Examples :: Marco Epsilon — " />
<meta name="twitter:description" content=".pro-anchor { width: 100%; } .pro-anchor-title { display:flex; flex-direction: row; width:100%; padding-bottom:10px; } .pro-anchor-icon { width:48px; height:48px; display:inline; vertical-align: middle; } .pro-anchor-title-content { display: inline; } .pro-anchor-separate { margin:auto 2px; border:1px darkcyan dashed; height: 1px; width:60%; vertical-align: middle; text-align: center; } .pro-anchor-title-action { width:32px; height:32px; margin: auto 4px; display:block; z-index: 10000; } .pro-anchor-content { display: none; } analogclock .sub-anchor-unit { padding-left: 15px; } .sub-anchor-unit-title { width:100%; display: flex; flex-direction: row;" />
<meta name="twitter:site" content="https://marcoepsilon.github.io/" />
<meta name="twitter:creator" content="Marco Epsilom" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Learning of Qt Official Examples :: Marco Epsilon — ">
<meta property="og:description" content=".pro-anchor { width: 100%; } .pro-anchor-title { display:flex; flex-direction: row; width:100%; padding-bottom:10px; } .pro-anchor-icon { width:48px; height:48px; display:inline; vertical-align: middle; } .pro-anchor-title-content { display: inline; } .pro-anchor-separate { margin:auto 2px; border:1px darkcyan dashed; height: 1px; width:60%; vertical-align: middle; text-align: center; } .pro-anchor-title-action { width:32px; height:32px; margin: auto 4px; display:block; z-index: 10000; } .pro-anchor-content { display: none; } analogclock .sub-anchor-unit { padding-left: 15px; } .sub-anchor-unit-title { width:100%; display: flex; flex-direction: row;" />
<meta property="og:url" content="https://marcoepsilon.github.io/posts/c&#43;&#43;/qt/example/" />
<meta property="og:site_name" content="Learning of Qt Official Examples" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-05-29 00:00:00 &#43;0000 UTC" />










<script type="text/javascript" src="/particles/particles.min.js">

</script>
<div style="position:fixed; width:100%; height:100%; " id="marcoEpsilon-Bg"></div>
<script type="text/javascript" src="/particles/app.js">
</script>
<style type="text/css">  
    pre {
        background-color:#282a36 !important;
    }
    .plain_text {
        word-wrap: break-word;
        word-break: break-all;
        white-space:normal;
        color:lime; 
    }
    span .plain_text .plain_text_default {
        color:lightskyblue!important;
    }
    @font-face {
        font-family: FiraCode;
        src:url('/fonts/FiraCode-Regular.ttf');
    }
    h1, h2, h3, h4, h5{
        margin-top: 20px;
        margin-bottom: 20px;
    }
</style>
<script type="text/javascript">
    function removeSurplus() {
        let plainText = document.querySelectorAll("pre code .plain_text");
        plainText.forEach(function (element,index,parent) {
            {
                let grand = element.parentNode.parentNode.parentNode;
                let parent = element.parentNode.parentNode;
                grand.replaceChild(element,parent);
            }
        });
    }
    function addLineNumber() {
        let pres = document.querySelectorAll("pre");
        pres.forEach(function (item,index) {
            item.classList.add("line-numbers");
            item.style.whiteSpace = "pre-wrap";
            item.firstChild.style.fontFamily = "FiraCode";
            item.firstChild.style.fontSize = "16px";
        });
    }
    function afterLoad() {
        return new Promise(function (resolve,reject) {
            removeSurplus();
            resolve();
        }).then(function (data) {
            addLineNumber();
        });
    }
    document.addEventListener("DOMContentLoaded",afterLoad);
</script>
<link rel="stylesheet" href="/prism/prism.css" type="text/css" />
<script src="/prism/prism.js" type="text/javascript" ></script>



<link rel="stylesheet" href="/css/syntax.css" type="text/css" charset="utf-8" />
</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Marco Epsilon&#39;s Terminal
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    
<style>
  .nav-guide {
     
    background-color:#78e2a0;
    width:70px;
    height:40px;
    text-align: center;
    vertical-align: middle;
    cursor:pointer;
    color:black;
  }
  .nav-guide:hover {
    background-color:darkcyan;
  }
  .nav-guide a {
    line-height: 40px;
    text-decoration: none;
     
    color:black;
  }
  .library-nav {
    list-style-type:none;
    margin:0px;
    display: none;
  }
  .library-item-name {
    line-height:40px;
  }
  .library-nav li {
    background-color:darkslategray;
    width:70px;
    height:40px;
    text-align:left;
    padding-left:10px;
    padding-right:10px;
    z-index:300;
  }
  .library-sub-item {
    line-height:40px;
  }
  li.nav-guide.library-nav-guide:hover ul {
    display: block;
  }
</style>
<nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          
            <li class="nav-guide"><a  href="/about">关于</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/tools">工具</a></li>
          
        
      
        
          
            <li class="nav-guide library-nav-guide">
                <span class="library-item-name">库</span>
                
                  <ul class="library-nav">
                    
                      <li>
                        <a href="https://marcoepsilon.github.io/golib" class="library-sub-item">
                          Go
                        </a>
                      </li>
                    
                      <li>
                        <a href="https://marcoepsilon.github.io/rustlib" class="library-sub-item">
                          Rust
                        </a>
                      </li>
                    
                  </ul>
                
            </li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/photos">照片</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/life">生活</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/">首页</a></li>
          
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">关于</a></li>
      
    
      
        <li><a href="/tools">工具</a></li>
      
    
      
        <li><a href="/golib">库</a></li>
      
    
      
        <li><a href="/photos">照片</a></li>
      
    
      
        <li><a href="/life">生活</a></li>
      
    
      
        <li><a href="/">首页</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://marcoepsilon.github.io/posts/c&#43;&#43;/qt/example/">Learning of Qt Official Examples</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2021-05-29
    </span>
    
    
    <span class="post-author">::
      Marco Epsilom
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://marcoepsilon.github.io/tags/c&#43;&#43;/">c&#43;&#43;</a>&nbsp;
    
    #<a href="https://marcoepsilon.github.io/tags/qt/">qt</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    <p><style>
    .pro-anchor {
        width: 100%;
    }
    .pro-anchor-title {
        display:flex;
        flex-direction: row;
        width:100%;
        padding-bottom:10px;
    }
    .pro-anchor-icon {
        width:48px;
        height:48px;
        display:inline;
        vertical-align: middle;
    }
    .pro-anchor-title-content {
        display: inline;
    }
    .pro-anchor-separate {
        margin:auto 2px;
        border:1px darkcyan dashed;
        height: 1px;
        width:60%;
        vertical-align: middle;
        text-align: center;
    }
    .pro-anchor-title-action {
        width:32px;
        height:32px;
        margin: auto 4px;
        display:block;
        z-index: 10000;
    }
    .pro-anchor-content {
        display: none;
    }
</style>
<div class="pro-anchor">
    <div class="pro-anchor-title">
        <div class="pro-anchor-title-prefix">
            <img src="/icon/folder.svg" class="pro-anchor-icon"/>
            <h1 class="pro-anchor-title-content">analogclock</h1>
        </div>
        <hr class="pro-anchor-separate"/>
        <img name="pro-anchor-action" data-action="popup_action" src="/icon/popup.svg" class="pro-anchor-title-action" />
    </div>
    <div class="pro-anchor-content" id="pro-anchor-content">
        
<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=pro class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">analogclock.pro</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#75715e">######################################################################
</span><span style="color:#75715e"># Automatically generated by qmake (3.1) Sat May 29 22:13:45 2021
</span><span style="color:#75715e">######################################################################
</span><span style="color:#75715e"></span>QT <span style="color:#f92672">+=</span> widgets gui core

TEMPLATE <span style="color:#f92672">=</span> app
TARGET <span style="color:#f92672">=</span> anlogclock

SOURCES <span style="color:#f92672">+=</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    analogclockwgt.cpp <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    main.cpp

HEADERS <span style="color:#f92672">+=</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    analogclockwgt.h
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=h class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">analogclock.h</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#ifndef ANALOGCLOCKWGT_H
</span><span style="color:#75715e">#define ANALOGCLOCKWGT_H
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QWidget&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">AnalogClockWgt</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> QWidget
{
    Q_OBJECT

    <span style="color:#a6e22e">Q_PROPERTY</span>(QColor m_hourColor READ hourColor WRITE setHourColor)

    Q_PROPERTY(QColor m_miniuteColor READ miniuteColor WRITE setMiniuteColor)
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>

    <span style="color:#66d9ef">explicit</span> AnalogClockWgt(QWidget <span style="color:#f92672">*</span>parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>);

    <span style="color:#66d9ef">inline</span> QColor <span style="color:#a6e22e">hourColor</span>() { <span style="color:#66d9ef">return</span> m_hourColor; }
    <span style="color:#66d9ef">inline</span> QColor <span style="color:#a6e22e">miniuteColor</span>() { <span style="color:#66d9ef">return</span> m_miniuteColor; }

    <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setHourColor</span>(QColor hourColor) { m_hourColor <span style="color:#f92672">=</span> hourColor; }
    <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setMiniuteColor</span>(QColor miniuteColor) { m_miniuteColor <span style="color:#f92672">=</span> miniuteColor; }

<span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">void</span> paintEvent(QPaintEvent <span style="color:#f92672">*</span>event) <span style="color:#66d9ef">override</span>;

    <span style="color:#66d9ef">inline</span> QSize <span style="color:#a6e22e">sizeHint</span>() <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">override</span> { <span style="color:#66d9ef">return</span> QSize(<span style="color:#ae81ff">420</span>, <span style="color:#ae81ff">420</span>); }
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    QColor m_hourColor;
    QColor m_miniuteColor;
signals:

};

<span style="color:#75715e">#endif </span><span style="color:#75715e">// ANALOGCLOCKWGT_H
</span></code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=cpp class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">analogclock.cpp</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;analogclockwgt.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QPainter&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QTime&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QTimer&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
AnalogClockWgt<span style="color:#f92672">::</span>AnalogClockWgt(QWidget <span style="color:#f92672">*</span>parent)
    <span style="color:#f92672">:</span> QWidget(parent)
    , m_hourColor(QColor(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">255</span>, <span style="color:#ae81ff">0</span>))
    , m_miniuteColor(Qt<span style="color:#f92672">::</span>darkYellow)
{
    QTimer<span style="color:#f92672">*</span> timer <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QTimer(<span style="color:#66d9ef">this</span>);

    connect(timer, <span style="color:#f92672">&amp;</span>QTimer<span style="color:#f92672">::</span>timeout, <span style="color:#66d9ef">this</span>, QOverload<span style="color:#f92672">&lt;&gt;::</span>of(<span style="color:#f92672">&amp;</span>QWidget<span style="color:#f92672">::</span>update));

    timer<span style="color:#f92672">-&gt;</span>start(<span style="color:#ae81ff">1000</span>);
}

<span style="color:#66d9ef">void</span> AnalogClockWgt<span style="color:#f92672">::</span>paintEvent(QPaintEvent <span style="color:#f92672">*</span>event)
{
    Q_UNUSED(event);

    <span style="color:#66d9ef">static</span> QPointF hourPoints[] <span style="color:#f92672">=</span> {
        QPointF(<span style="color:#f92672">-</span><span style="color:#ae81ff">7.0f</span>, <span style="color:#ae81ff">0.0f</span>),
        QPointF(<span style="color:#ae81ff">7.0f</span>, <span style="color:#ae81ff">0.0f</span>),
        QPointF(<span style="color:#ae81ff">2.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">75.0f</span>),
        QPointF(<span style="color:#f92672">-</span><span style="color:#ae81ff">2.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">75.0f</span>),
    };

    <span style="color:#66d9ef">static</span> QPointF miniutePoints[] <span style="color:#f92672">=</span> {
      QPointF(<span style="color:#f92672">-</span><span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">9.0f</span>),
      QPointF(<span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">9.0f</span>),
      QPointF(<span style="color:#ae81ff">0.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">90.0f</span>),
    };

    <span style="color:#75715e">// begin with 200x200 canvas
</span><span style="color:#75715e"></span>    QPainter <span style="color:#a6e22e">painter</span>(<span style="color:#66d9ef">this</span>);

    <span style="color:#75715e">// trun on anti-anliasing
</span><span style="color:#75715e"></span>    painter.setRenderHint(QPainter<span style="color:#f92672">::</span>Antialiasing);
    painter.translate(<span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>width() <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>height() <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);
    painter.scale(<span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>width() <span style="color:#f92672">/</span> <span style="color:#ae81ff">200</span>, <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>height() <span style="color:#f92672">/</span> <span style="color:#ae81ff">200</span>);

    painter.setPen(Qt<span style="color:#f92672">::</span>NoPen);
    <span style="color:#75715e">// draw hour ticks
</span><span style="color:#75715e"></span>    painter.save();
    painter.setBrush(QBrush(Qt<span style="color:#f92672">::</span>red));
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">12</span>; <span style="color:#f92672">++</span>i)
    {
        painter.drawRect(QRectF(<span style="color:#f92672">-</span><span style="color:#ae81ff">1.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">100.0f</span>, <span style="color:#ae81ff">2.0f</span>, <span style="color:#ae81ff">8.0f</span>));
        painter.rotate(<span style="color:#ae81ff">360</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">12</span>);
    }
    painter.restore();

    <span style="color:#75715e">// draw miniute ticks
</span><span style="color:#75715e"></span>    painter.save();
    <span style="color:#75715e">//painter.setCompositionMode(QPainter::CompositionMode_SourceOut);
</span><span style="color:#75715e"></span>    painter.setBrush(QBrush(Qt<span style="color:#f92672">::</span>cyan));
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">60</span>; <span style="color:#f92672">++</span>i)
    {
       <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">%</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">!=</span> <span style="color:#ae81ff">0</span>)
       {
           painter.drawRect(QRectF(<span style="color:#f92672">-</span><span style="color:#ae81ff">0.5f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">98.0f</span>, <span style="color:#ae81ff">1.0f</span>, <span style="color:#ae81ff">4.0f</span>));
       }
       painter.rotate(<span style="color:#ae81ff">360</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">60</span>);
    }
    painter.restore();


    QTime currTime <span style="color:#f92672">=</span> QTime<span style="color:#f92672">::</span>currentTime();

    <span style="color:#75715e">// draw hour
</span><span style="color:#75715e"></span>    painter.save();
    painter.setBrush(QBrush(m_hourColor));
    painter.rotate((currTime.hour() <span style="color:#f92672">+</span> currTime.minute() <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">30.0f</span>);
    painter.drawConvexPolygon(hourPoints, <span style="color:#ae81ff">4</span>);
    painter.restore();

    <span style="color:#75715e">// draw miniute
</span><span style="color:#75715e"></span>    painter.save();
    painter.setBrush(QBrush(m_miniuteColor));
    painter.rotate((currTime.minute() <span style="color:#f92672">+</span> currTime.second() <span style="color:#f92672">/</span> <span style="color:#ae81ff">60.0f</span>) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6.0f</span>);
    painter.drawConvexPolygon(miniutePoints, <span style="color:#ae81ff">3</span>);
    painter.restore();

    <span style="color:#75715e">// draw clock center
</span><span style="color:#75715e"></span>    painter.setBrush(QBrush(Qt<span style="color:#f92672">::</span>black));
    painter.drawEllipse(QRectF(<span style="color:#f92672">-</span><span style="color:#ae81ff">3.0f</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">3.0f</span>, <span style="color:#ae81ff">6.0f</span>, <span style="color:#ae81ff">6.0f</span>));
}
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=cpp class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">main.cpp</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QApplication&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;analogclockwgt.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> argv)
{
    QApplication app(argc, argv);

    AnalogClockWgt clockWgt;
    clockWgt.show();
    <span style="color:#66d9ef">return</span> app.exec();
}
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=makefile class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">makefile</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile">QT_INSTALL_DIR <span style="color:#f92672">?=</span> /home/marco/lib/Qt/5.14.2/gcc_64

SOURCES <span style="color:#f92672">=</span> moc_analogclockwgt.cpp analogclockwgt.cpp main.cpp

HEADERS <span style="color:#f92672">=</span> analogclockwgt.h

BUILD_DIR <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>PWD<span style="color:#66d9ef">)</span>/build
OBJECTS_DIR <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)</span>/obj
BIN_DIR <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)</span>/bin
MOC_DIR <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)</span>/moc
CC <span style="color:#f92672">=</span> g++
MOC <span style="color:#f92672">=</span> moc

OBJECTS <span style="color:#f92672">=</span> <span style="color:#66d9ef">$(</span>addprefix <span style="color:#66d9ef">$(</span>OBJECTS_DIR<span style="color:#66d9ef">)</span>/,<span style="color:#66d9ef">$(</span>addsuffix .o,<span style="color:#66d9ef">$(</span>basename <span style="color:#66d9ef">$(</span>SOURCES<span style="color:#66d9ef">))))</span>

INCLUDE_PATH <span style="color:#f92672">:=</span> -I<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/include
INCLUDE_PATH <span style="color:#f92672">+=</span> -I<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/include/QtCore
INCLUDE_PATH <span style="color:#f92672">+=</span> -I<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/include/QtGui
INCLUDE_PATH <span style="color:#f92672">+=</span> -I<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/include/QtWidgets

LIBS <span style="color:#f92672">:=</span> -L<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/lib
LIBS <span style="color:#f92672">+=</span> -lQt5Core -lQt5Gui -lQt5Widgets

CFLAGS <span style="color:#f92672">=</span> -I. <span style="color:#66d9ef">$(</span>INCLUDE_PATH<span style="color:#66d9ef">)</span> -fPIC
MOC_FLAGS <span style="color:#f92672">=</span> -I. <span style="color:#66d9ef">$(</span>INCLUDE_PATH<span style="color:#66d9ef">)</span>
LFLAGS <span style="color:#f92672">=</span> -Wl,-rpath,<span style="color:#66d9ef">$(</span>QT_INSTALL_DIR<span style="color:#66d9ef">)</span>/lib

<span style="color:#a6e22e">$(MOC_DIR)/moc_%.cpp</span><span style="color:#f92672">:</span> %.h
	<span style="color:#66d9ef">$(</span>MOC<span style="color:#66d9ef">)</span> $^ <span style="color:#66d9ef">$(</span>MOC_FLAGS<span style="color:#66d9ef">)</span> -o $@

<span style="color:#a6e22e">$(OBJECTS_DIR)/%.o</span><span style="color:#f92672">:</span> %.cpp
	<span style="color:#66d9ef">$(</span>CC<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>CFLAGS<span style="color:#66d9ef">)</span> -c $^ -o $@

<span style="color:#a6e22e">$(OBJECTS_DIR)/moc_%.o</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">$(</span>MOC_DIR<span style="color:#66d9ef">)</span>/moc_%.cpp
	<span style="color:#66d9ef">$(</span>CC<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>CFLAGS<span style="color:#66d9ef">)</span> -c $^ -o $@	

<span style="color:#a6e22e">$(BIN_DIR)/analogclock</span><span style="color:#f92672">:</span> first <span style="color:#66d9ef">$(</span>OBJECTS<span style="color:#66d9ef">)</span>
	<span style="color:#66d9ef">$(</span>CC<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>LFLAGS<span style="color:#66d9ef">)</span> <span style="color:#66d9ef">$(</span>OBJECTS<span style="color:#66d9ef">)</span> -o $@ <span style="color:#66d9ef">$(</span>LIBS<span style="color:#66d9ef">)</span>

<span style="color:#960050;background-color:#1e0010">define</span> <span style="color:#960050;background-color:#1e0010">create_build_dir</span>
	<span style="color:#66d9ef">$(</span>if <span style="color:#66d9ef">$(</span>filter <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)</span>,<span style="color:#66d9ef">$(</span>wildcard <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)))</span>,,<span style="color:#66d9ef">$(</span>shell mkdir -p <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)))</span>
	<span style="color:#66d9ef">$(</span>if <span style="color:#66d9ef">$(</span>filter <span style="color:#66d9ef">$(</span>OBJECTS_DIR<span style="color:#66d9ef">)</span>,<span style="color:#66d9ef">$(</span>wildcard <span style="color:#66d9ef">$(</span>OBJECTS_DIR<span style="color:#66d9ef">)))</span>,,<span style="color:#66d9ef">$(</span>shell mkdir -p <span style="color:#66d9ef">$(</span>OBJECTS_DIR<span style="color:#66d9ef">)))</span>
	<span style="color:#66d9ef">$(</span>if <span style="color:#66d9ef">$(</span>filter <span style="color:#66d9ef">$(</span>BIN_DIR<span style="color:#66d9ef">)</span>,<span style="color:#66d9ef">$(</span>wildcard <span style="color:#66d9ef">$(</span>BIN_DIR<span style="color:#66d9ef">)))</span>, ,<span style="color:#66d9ef">$(</span>shell mkdir -p <span style="color:#66d9ef">$(</span>BIN_DIR<span style="color:#66d9ef">)))</span>
	<span style="color:#66d9ef">$(</span>if <span style="color:#66d9ef">$(</span>filter <span style="color:#66d9ef">$(</span>MOC_DIR<span style="color:#66d9ef">)</span>,<span style="color:#66d9ef">$(</span>wildcard <span style="color:#66d9ef">$(</span>MOC_DIR<span style="color:#66d9ef">)))</span>, ,<span style="color:#66d9ef">$(</span>shell mkdir -p <span style="color:#66d9ef">$(</span>MOC_DIR<span style="color:#66d9ef">)))</span>
<span style="color:#960050;background-color:#1e0010">endef</span>

<span style="color:#a6e22e">.PHONY</span><span style="color:#f92672">:</span> first
<span style="color:#a6e22e">first</span><span style="color:#f92672">:</span>
	<span style="color:#66d9ef">$(</span>call create_build_dir<span style="color:#66d9ef">)</span>
<span style="color:#a6e22e">clean</span><span style="color:#f92672">:</span>
	rm -rf <span style="color:#66d9ef">$(</span>BUILD_DIR<span style="color:#66d9ef">)</span>
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>


    </div>
</div>

<script type="text/javascript">
{  
    const POPUP_ITEM = "popup_action";
    const COLLAPSE_ITEM = "collapse_action";

    function invertTo(item, type) {
        switch (type)
        {
        case POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "pro-anchor-title-action";
            item.onclick = onPopupAction;
        }
        break;
        case COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "pro-anchor-title-action";
            item.onclick = onCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onPopupAction() {
        console.log("popup action");
        invertTo(this, COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onCollapseAction() {
        console.log("collapse action");
        invertTo(this, POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            console.log("eee");
            content.style.display = "none";
        }
    }

    
    function initAction() {
        var elements = document.getElementsByName("pro-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            if (element.dataset.action == POPUP_ITEM)
            {
                element.onclick = onPopupAction;
            }
            else if (element.dataset.action == COLLAPSE_ITEM)
            {
                element.onclick = onCollapseAction;
            }
            else
            {

            }
        });
    }

    initAction();
}
</script>

<style>
    .pro-anchor {
        width: 100%;
    }
    .pro-anchor-title {
        display:flex;
        flex-direction: row;
        width:100%;
        padding-bottom:10px;
    }
    .pro-anchor-icon {
        width:48px;
        height:48px;
        display:inline;
        vertical-align: middle;
    }
    .pro-anchor-title-content {
        display: inline;
    }
    .pro-anchor-separate {
        margin:auto 2px;
        border:1px darkcyan dashed;
        height: 1px;
        width:60%;
        vertical-align: middle;
        text-align: center;
    }
    .pro-anchor-title-action {
        width:32px;
        height:32px;
        margin: auto 4px;
        display:block;
        z-index: 10000;
    }
    .pro-anchor-content {
        display: none;
    }
</style>
<div class="pro-anchor">
    <div class="pro-anchor-title">
        <div class="pro-anchor-title-prefix">
            <img src="/icon/folder.svg" class="pro-anchor-icon"/>
            <h1 class="pro-anchor-title-content">elidedlabel</h1>
        </div>
        <hr class="pro-anchor-separate"/>
        <img name="pro-anchor-action" data-action="popup_action" src="/icon/popup.svg" class="pro-anchor-title-action" />
    </div>
    <div class="pro-anchor-content" id="pro-anchor-content">
        
<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=pro class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">elidedlabel.pro</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#75715e">######################################################################
</span><span style="color:#75715e"># Automatically generated by qmake (3.1) Mon May 31 21:47:55 2021
</span><span style="color:#75715e">######################################################################
</span><span style="color:#75715e"></span>
QT <span style="color:#f92672">+=</span> core widgets gui
TEMPLATE <span style="color:#f92672">=</span> app

TARGET <span style="color:#f92672">=</span> elidelabel

SOURCES <span style="color:#f92672">+=</span> main.cpp <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span> <span style="color:#ae81ff">\#</span> Directories
    elidedlabel.cpp <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    elidedwgt.cpp

HEADERS <span style="color:#f92672">+=</span> <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    elidedlabel.h <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>    elidedwgt.h
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=h class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">elidedlabel.h</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#ifndef ELIDEDLABEL_H
</span><span style="color:#75715e">#define ELIDEDLABEL_H
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QFrame&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ElidedLabel</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> QFrame
{
    Q_OBJECT

    <span style="color:#a6e22e">Q_PROPERTY</span>(QString m_content READ content WRITE setContent)
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    ElidedLabel(<span style="color:#66d9ef">const</span> QString<span style="color:#f92672">&amp;</span> content, QWidget<span style="color:#f92672">*</span> parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>);

    <span style="color:#66d9ef">inline</span> QString <span style="color:#a6e22e">content</span>() <span style="color:#66d9ef">const</span> { <span style="color:#66d9ef">return</span> m_content; }
    <span style="color:#66d9ef">inline</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">setContent</span>(<span style="color:#66d9ef">const</span> QString<span style="color:#f92672">&amp;</span> content) { m_content <span style="color:#f92672">=</span> content; <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>update(); }
<span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">void</span> paintEvent(QPaintEvent <span style="color:#f92672">*</span>) <span style="color:#66d9ef">override</span>;
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    QString m_content; <span style="color:#75715e">// 显示的内容
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">bool</span> m_elided;
signals:
    <span style="color:#66d9ef">void</span> elidedChanged(<span style="color:#66d9ef">bool</span>);
};

<span style="color:#75715e">#endif </span><span style="color:#75715e">// ELIDEDLABEL_H
</span></code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=cpp class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">elidedlabel.cpp</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;elidedlabel.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QPainter&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QTextLayout&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
ElidedLabel<span style="color:#f92672">::</span>ElidedLabel(<span style="color:#66d9ef">const</span> QString<span style="color:#f92672">&amp;</span> content, QWidget<span style="color:#f92672">*</span> parent)
    <span style="color:#f92672">:</span> QFrame(parent)
    , m_content(content)
{
    <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>setSizePolicy(QSizePolicy<span style="color:#f92672">::</span>Expanding, QSizePolicy<span style="color:#f92672">::</span>Preferred);
}

<span style="color:#66d9ef">void</span> ElidedLabel<span style="color:#f92672">::</span>paintEvent(QPaintEvent<span style="color:#f92672">*</span> event)
{

    QFrame<span style="color:#f92672">::</span>paintEvent(event);
    QPainter <span style="color:#a6e22e">painter</span>(<span style="color:#66d9ef">this</span>);
    QFontMetrics fontMetrics <span style="color:#f92672">=</span> painter.fontMetrics();


    <span style="color:#66d9ef">int</span> y <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">int</span> lineSpacing <span style="color:#f92672">=</span> fontMetrics.lineSpacing();

    QTextLayout <span style="color:#a6e22e">textLayout</span>(m_content, painter.font());
    textLayout.beginLayout();

    <span style="color:#66d9ef">bool</span> didElide <span style="color:#f92672">=</span> false;
    <span style="color:#66d9ef">while</span> (<span style="color:#ae81ff">1</span>)
    {
        QTextLine textLine <span style="color:#f92672">=</span> textLayout.createLine();

        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>textLine.isValid())
        {
            <span style="color:#66d9ef">break</span>;
        }
        textLine.setLineWidth(width());

        <span style="color:#66d9ef">int</span> nextLineY <span style="color:#f92672">=</span> y <span style="color:#f92672">+</span> lineSpacing;

        <span style="color:#75715e">// 判断是否有空间放置下下行,如果没有则在下行进行elide
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>height() <span style="color:#f92672">&gt;=</span> nextLineY <span style="color:#f92672">+</span> lineSpacing)
        {
            textLine.draw(<span style="color:#f92672">&amp;</span>painter, QPoint(<span style="color:#ae81ff">0</span>, y));
            y <span style="color:#f92672">=</span> nextLineY;
        }
        <span style="color:#66d9ef">else</span>
        {
            QString lastLine <span style="color:#f92672">=</span> m_content.mid(textLine.textStart());
            QString elidedLastLine <span style="color:#f92672">=</span> fontMetrics.elidedText(lastLine, Qt<span style="color:#f92672">::</span>ElideRight, <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>width());
            <span style="color:#75715e">// QTextLine 绘制从top到bottom
</span><span style="color:#75715e"></span>            <span style="color:#75715e">// QPainter::drawText 绘制从 top - ascent到baseline
</span><span style="color:#75715e"></span>            painter.drawText(QPointF(<span style="color:#ae81ff">0</span>, y <span style="color:#f92672">+</span> fontMetrics.ascent()), elidedLastLine);

            <span style="color:#75715e">// 判断是否省略了其他文字,还是刚刚好结束
</span><span style="color:#75715e"></span>            textLine <span style="color:#f92672">=</span> textLayout.createLine();
            didElide <span style="color:#f92672">=</span> textLine.isValid();
            <span style="color:#66d9ef">break</span>;
        }
    }
    textLayout.endLayout();

    <span style="color:#66d9ef">if</span> (m_elided <span style="color:#f92672">!=</span> didElide)
    {
        m_elided <span style="color:#f92672">=</span> didElide;
        emit <span style="color:#a6e22e">elidedChanged</span>(m_elided);
    }
}
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=h class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">elidedwgt.h</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#ifndef ELIDEDWGT_H
</span><span style="color:#75715e">#define ELIDEDWGT_H
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QWidget&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QLabel</span>;
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QPushButton</span>;
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">QSlider</span>;
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ElidedLabel</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ElidedWgt</span> <span style="color:#f92672">:</span> <span style="color:#66d9ef">public</span> QWidget
{
    Q_OBJECT
<span style="color:#66d9ef">public</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">explicit</span> ElidedWgt(QWidget <span style="color:#f92672">*</span>parent <span style="color:#f92672">=</span> <span style="color:#66d9ef">nullptr</span>);
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">void</span> createUi();

    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">connectSignalAndSlots</span>();

<span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
    <span style="color:#66d9ef">void</span> resizeEvent(QResizeEvent <span style="color:#f92672">*</span>event) <span style="color:#66d9ef">override</span>;
<span style="color:#66d9ef">private</span><span style="color:#f92672">:</span>
    QLabel<span style="color:#f92672">*</span> m_elidedLabel;

    QPushButton<span style="color:#f92672">*</span> m_switchTextBtn;

    QPushButton<span style="color:#f92672">*</span> m_exitBtn;

    QSlider<span style="color:#f92672">*</span> m_widthSlider;

    QSlider<span style="color:#f92672">*</span> m_heightSlider;

    ElidedLabel<span style="color:#f92672">*</span> m_elidedWgt;

    QStringList m_sampleList;

    <span style="color:#66d9ef">int</span> m_currSampleIndex;
signals:
};

<span style="color:#75715e">#endif </span><span style="color:#75715e">// ELIDEDWGT_H
</span></code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=cpp class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">elidedwgt.cpp</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;elidedwgt.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QPushButton&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QLabel&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QSlider&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QGridLayout&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QTimer&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;elidedlabel.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QDebug&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QApplication&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#75715e">#define USER_CHECK_POINTER(p) if ((p) == nullptr) return;
</span><span style="color:#75715e"></span>
ElidedWgt<span style="color:#f92672">::</span>ElidedWgt(QWidget <span style="color:#f92672">*</span>parent)
    <span style="color:#f92672">:</span> QWidget(parent)
    , m_widthSlider(<span style="color:#66d9ef">nullptr</span>)
    , m_heightSlider(<span style="color:#66d9ef">nullptr</span>)
    , m_elidedWgt(<span style="color:#66d9ef">nullptr</span>)
    , m_currSampleIndex(<span style="color:#ae81ff">0</span>)
{
    <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>createUi();
}

<span style="color:#66d9ef">void</span> ElidedWgt<span style="color:#f92672">::</span>createUi()
{
    m_elidedLabel <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QLabel(<span style="color:#e6db74">&#34;Elided&#34;</span>, <span style="color:#66d9ef">this</span>);
    m_elidedLabel<span style="color:#f92672">-&gt;</span>setVisible(false);

    m_switchTextBtn <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QPushButton(<span style="color:#e6db74">&#34;Switch Text&#34;</span>, <span style="color:#66d9ef">this</span>);
    m_exitBtn <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QPushButton(<span style="color:#e6db74">&#34;Exit&#34;</span>, <span style="color:#66d9ef">this</span>);
    m_widthSlider <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QSlider(Qt<span style="color:#f92672">::</span>Horizontal, <span style="color:#66d9ef">this</span>);
    m_widthSlider<span style="color:#f92672">-&gt;</span>setMinimum(<span style="color:#ae81ff">0</span>);

    m_heightSlider <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QSlider(Qt<span style="color:#f92672">::</span>Vertical, <span style="color:#66d9ef">this</span>);
    m_heightSlider<span style="color:#f92672">-&gt;</span>setInvertedAppearance(true);
    m_heightSlider<span style="color:#f92672">-&gt;</span>setMinimum(<span style="color:#ae81ff">0</span>);


    <span style="color:#66d9ef">const</span> QString chineseStr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;我毋是头脑空空&#34;</span>
                               <span style="color:#e6db74">&#34;我毋是一只米虫&#34;</span>
                               <span style="color:#e6db74">&#34;侬啊侬 一世侬&#34;</span>
                               <span style="color:#e6db74">&#34;欲按怎欢喜 过春夏秋冬&#34;</span>
                               <span style="color:#e6db74">&#34;我有我的路 有我的梦&#34;</span>;

    <span style="color:#66d9ef">const</span> QString englishStr <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;And I know this ain&#39;t rocket science&#34;</span>
                               <span style="color:#e6db74">&#34;And I never leave the house&#34;</span>
                               <span style="color:#e6db74">&#34;Without checking on your first&#34;</span>
                               <span style="color:#e6db74">&#34;And begin to wonder&#34;</span>
                               <span style="color:#e6db74">&#34;Next time that I get-get-get-get-ger her&#34;</span>;

    m_sampleList <span style="color:#f92672">&lt;&lt;</span> chineseStr <span style="color:#f92672">&lt;&lt;</span> englishStr;
    m_elidedWgt <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ElidedLabel(m_sampleList[m_currSampleIndex], <span style="color:#66d9ef">this</span>);
    m_elidedWgt<span style="color:#f92672">-&gt;</span>setFrameStyle(QFrame<span style="color:#f92672">::</span>Box);

    QGridLayout<span style="color:#f92672">*</span> mainLayout <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> QGridLayout(<span style="color:#66d9ef">this</span>);

    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_elidedLabel, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, Qt<span style="color:#f92672">::</span>AlignCenter);
    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_switchTextBtn, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>);
    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_exitBtn, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">3</span>);

    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_widthSlider, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>);
    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_heightSlider, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">0</span>);
    mainLayout<span style="color:#f92672">-&gt;</span>addWidget(m_elidedWgt, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, Qt<span style="color:#f92672">::</span>AlignTop <span style="color:#f92672">|</span> Qt<span style="color:#f92672">::</span>AlignLeft);
    <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>setLayout(mainLayout);

    <span style="color:#66d9ef">this</span><span style="color:#f92672">-&gt;</span>connectSignalAndSlots();
}

<span style="color:#66d9ef">void</span> ElidedWgt<span style="color:#f92672">::</span>connectSignalAndSlots()
{
    connect(m_widthSlider, <span style="color:#f92672">&amp;</span>QSlider<span style="color:#f92672">::</span>valueChanged, m_elidedWgt, <span style="color:#f92672">&amp;</span>QWidget<span style="color:#f92672">::</span>setFixedWidth);

    connect(m_heightSlider, <span style="color:#f92672">&amp;</span>QSlider<span style="color:#f92672">::</span>valueChanged, m_elidedWgt, <span style="color:#f92672">&amp;</span>QWidget<span style="color:#f92672">::</span>setFixedHeight);

    connect(m_switchTextBtn, <span style="color:#f92672">&amp;</span>QPushButton<span style="color:#f92672">::</span>clicked, [<span style="color:#f92672">&amp;</span>]() {
        m_currSampleIndex <span style="color:#f92672">=</span> (m_currSampleIndex <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">%</span> m_sampleList.size();
        m_elidedWgt<span style="color:#f92672">-&gt;</span>setContent(m_sampleList[m_currSampleIndex]);
    });

    connect(m_exitBtn, <span style="color:#f92672">&amp;</span>QPushButton<span style="color:#f92672">::</span>clicked, qApp, <span style="color:#f92672">&amp;</span>QApplication<span style="color:#f92672">::</span>exit);

    connect(m_elidedWgt, <span style="color:#f92672">&amp;</span>ElidedLabel<span style="color:#f92672">::</span>elidedChanged, m_elidedLabel, <span style="color:#f92672">&amp;</span>QLabel<span style="color:#f92672">::</span>setVisible);
}

<span style="color:#66d9ef">void</span> ElidedWgt<span style="color:#f92672">::</span>resizeEvent(QResizeEvent <span style="color:#f92672">*</span>event)
{
    Q_UNUSED(event);

    USER_CHECK_POINTER(m_widthSlider)

    USER_CHECK_POINTER(m_heightSlider)

    USER_CHECK_POINTER(m_elidedWgt)

    <span style="color:#66d9ef">int</span> maxWidth <span style="color:#f92672">=</span> m_widthSlider<span style="color:#f92672">-&gt;</span>width();
    m_widthSlider<span style="color:#f92672">-&gt;</span>setMaximum(maxWidth);
    m_widthSlider<span style="color:#f92672">-&gt;</span>setValue(maxWidth <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);

    <span style="color:#66d9ef">int</span> maxHeight <span style="color:#f92672">=</span> m_heightSlider<span style="color:#f92672">-&gt;</span>height();
    m_heightSlider<span style="color:#f92672">-&gt;</span>setMaximum(maxHeight);
    m_heightSlider<span style="color:#f92672">-&gt;</span>setValue(maxHeight <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>);

    m_elidedWgt<span style="color:#f92672">-&gt;</span>setFixedSize(m_widthSlider<span style="color:#f92672">-&gt;</span>value(), m_heightSlider<span style="color:#f92672">-&gt;</span>value());
}
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>

<style>
    .sub-anchor-unit {
        padding-left: 15px;
    }
    .sub-anchor-unit-title {
        width:100%;
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
    }
    .sub-anchor-unit-title-prefix {
        width: 30%;
    }
    .sub-anchor-separate {
        height:1px;
        border:1px seagreen dashed;
        max-width:70%;
        min-width:60%;
        margin:auto 2px;
    }
    .sub-anchor-avar {
        width: 24px;
        height: 24px;
        vertical-align: middle;
        display: inline-block;
    }
    .sub-anchor-title {
        text-align: center;
        margin:auto 4px;
        display: inline-block;
    }
    .sub-anchor-action {
        width:24px;
        height:24px;
        z-index:100000;
        padding-left:4px;
    }
    .sub-anchor-unit-content {
        padding-left:10px;
        display:none;
    }
</style>
<div class="sub-anchor-unit">
    <div class="sub-anchor-unit-title">
        <div class="sub-anchor-unit-title-prefix">
            <img data-type=cpp class="sub-anchor-avar" name="sub-anchor-avar"/>
            <span class="sub-anchor-title">main.cpp</span>
        </div>
        <hr class="sub-anchor-separate"/>
        <img src="/icon/popup.svg" data-action="subanchor_popup_action" class="sub-anchor-action" name="sub-anchor-action"/>
    </div>
    <div class="sub-anchor-unit-content">
        
<br/>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;QApplication&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;elidedwgt.h&#34;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> argv)
{
    QApplication app(argc, argv);

    ElidedWgt wgt;
    wgt.showFullScreen();
    <span style="color:#66d9ef">return</span> app.exec();
}
</code></pre></div>

    </div>
</div>
<script type="text/javascript">
{
    let typeSrcMap = new Map([
        ["c", "/icon/c.svg"],
        ["cpp", "/icon/cpp.svg"],
        ["go", "/icon/go.svg"],
        ["makefile", "/icon/makefile.svg"],
        ["pro", "/icon/qt.svg"],
        ["h", "/icon/h.svg"]
    ]);

    let avarElements = document.getElementsByName("sub-anchor-avar");
    avarElements.forEach((element, value) => {
        element.src = typeSrcMap.get(element.dataset.type);
    });

    const SUBANCHOR_POPUP_ITEM = "subanchor_popup_action";
    const SUBANCHOR_COLLAPSE_ITEM = "subanchor_collapse_action";

    function subAnchorInvertTo(item, type) {
        switch (type)
        {
        case SUBANCHOR_POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorPopupAction;
        }
        break;
        case SUBANCHOR_COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "sub-anchor-action";
            item.onclick = onSubAnchorCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onSubAnchorPopupAction() {
        subAnchorInvertTo(this, SUBANCHOR_COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onSubAnchorCollapseAction() {
        subAnchorInvertTo(this, SUBANCHOR_POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            content.style.display = "none";
        }
    }

    
    function initSubAnchorAction() {
        console.log("sub-anchor-initAction");
        var elements = document.getElementsByName("sub-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            console.log(element.dataset.action);
            if (element.dataset.action == SUBANCHOR_POPUP_ITEM)
            {
                element.onclick = onSubAnchorPopupAction;
            }
            else if (element.dataset.action == SUBANCHOR_COLLAPSE_ITEM)
            {
                element.onclick = onSubAnchorCollapseAction;
            }
            else
            {

            }
        });
    }

    initSubAnchorAction();
}
</script>


    </div>
</div>

<script type="text/javascript">
{  
    const POPUP_ITEM = "popup_action";
    const COLLAPSE_ITEM = "collapse_action";

    function invertTo(item, type) {
        switch (type)
        {
        case POPUP_ITEM:
        {
            item.src = "/icon/popup.svg";
            item.dataset.action = type;
            item.class = "pro-anchor-title-action";
            item.onclick = onPopupAction;
        }
        break;
        case COLLAPSE_ITEM:
        {
            item.src = "/icon/collapse.svg";
            item.dataset.action = type;
            item.class = "pro-anchor-title-action";
            item.onclick = onCollapseAction;
        }
        break;
        default:
        break;
        }
        return item;
    }
    function onPopupAction() {
        console.log("popup action");
        invertTo(this, COLLAPSE_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;
        if (content && content != undefined) {
            content.style.display = "block";
        }
    }

    function onCollapseAction() {
        console.log("collapse action");
        invertTo(this, POPUP_ITEM);

        let content = this.parentNode.parentNode.lastElementChild;

        if (content && content != undefined) {
            console.log("eee");
            content.style.display = "none";
        }
    }

    
    function initAction() {
        var elements = document.getElementsByName("pro-anchor-action");
        console.log(elements.length);
        elements.forEach((element, index) => {
            if (element.dataset.action == POPUP_ITEM)
            {
                element.onclick = onPopupAction;
            }
            else if (element.dataset.action == COLLAPSE_ITEM)
            {
                element.onclick = onCollapseAction;
            }
            else
            {

            }
        });
    }

    initAction();
}
</script>
</p>

  </div>
  
  <div style="margin-top:0px;" class="pagination">
    <div style="margin-top:10px;" class="pagination__title">
      <span
        class="pagination__title-h">Next Post</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      
      <span class="button next">
        <a href="https://marcoepsilon.github.io/posts/c&#43;&#43;/languages/declarations/attributes/">
          <span class="button__text">Attribute specifier sequence</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

<script src="https://utteranc.es/client.js"
        repo="MarcoEpsilon/marcoepsilon.github.io"
        issue-term="og:title"
        theme="photon-dark"
        crossorigin="anonymous"
        async>
</script>
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Marco Epsilon@Copyright</div>
    
  </div>
</footer>



<div>
    <p style="width:100%; padding-left:25%; color:brown; font-size:23px;">
        我只知道一件事情
    </p>
    <p style="width:100%; padding-left:48%; color:coral; font-size:23px;">我什么都不知道</p>
</div>


  
</div>

</body>
</html>
