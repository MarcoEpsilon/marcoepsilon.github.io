<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Log :: Marco Epsilon</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="description" content="Overview 包log实现简单的日志包,它定义的类型Logger,包含一些格式化输出的方法,它还有预定义的易访问的标准&#34;Logger&#34;,通过帮助函数 Pr"/>
<meta name="keywords" content=""/>
<meta name="robots" content="noodp"/>
<link rel="canonical" href="https://marcoepsilon.github.io/golib/log/log/" />


<link rel="stylesheet" href="https://marcoepsilon.github.io/assets/style.css">

  <link rel="stylesheet" href="https://marcoepsilon.github.io/assets/green.css">






<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://marcoepsilon.github.io/img/apple-touch-icon-144-precomposed.png">

<link rel="shortcut icon" href="https://marcoepsilon.github.io/favicon/favicon.ico">



<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Log :: Marco Epsilon — " />
<meta name="twitter:description" content="Overview 包log实现简单的日志包,它定义的类型Logger,包含一些格式化输出的方法,它还有预定义的易访问的标准&#34;Logger&#34;,通过帮助函数 Pr" />
<meta name="twitter:site" content="https://marcoepsilon.github.io/" />
<meta name="twitter:creator" content="Marco Epsilon" />
<meta name="twitter:image" content="">


<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Log :: Marco Epsilon — ">
<meta property="og:description" content="Overview 包log实现简单的日志包,它定义的类型Logger,包含一些格式化输出的方法,它还有预定义的易访问的标准&#34;Logger&#34;,通过帮助函数 Pr" />
<meta property="og:url" content="https://marcoepsilon.github.io/golib/log/log/" />
<meta property="og:site_name" content="Log" />
<meta property="og:image" content="">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2019-11-21 22:25:04 &#43;0800 CST" />










<script type="text/javascript" src="/particles/particles.min.js">

</script>
<div style="position:fixed; width:100%; height:100%; " id="marcoEpsilon-Bg"></div>
<div style="position:fixed; width:100%; height:100%; " id="marcoEpsilon-Bg-Second"></div>
<script type="text/javascript" src="/particles/app.js">

</script>

</head>
<body class="">


<div class="container center">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Marco Epsilon&#39;s Terminal
  </div>
</a>

    </div>
    <div class="menu-trigger">menu</div>
  </div>
  
    
<style>
  .nav-guide {
    background-color:chocolate;;;
    width:70px;
    height:40px;
    text-align: center;
    vertical-align: middle;
    cursor:pointer;
  }
  .nav-guide:hover {
    background-color:darkcyan;
  }
  .nav-guide a {
    line-height: 40px;
    text-decoration: none;
    color:white;
  }
  .library-nav {
    list-style-type:none;
    margin:0px;
    display: none;
  }
  .library-item-name {
    line-height:40px;
  }
  .library-nav li {
    background-color:darkslategray;
    width:70px;
    height:40px;
    text-align:left;
    padding-left:10px;
    padding-right:10px;
    z-index:300;
  }
  .library-sub-item {
    line-height:40px;
  }
  li.nav-guide.library-nav-guide:hover ul {
    display: block;
  }
</style>
<nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          
            <li class="nav-guide"><a  href="/about">关于</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/tools">工具</a></li>
          
        
      
        
          
            <li class="nav-guide library-nav-guide">
                <span class="library-item-name">库</span>
                
                  <ul class="library-nav">
                    
                      <li>
                        <a href="https://marcoepsilon.github.io/golib" class="library-sub-item">
                          Go
                        </a>
                      </li>
                    
                      <li>
                        <a href="https://marcoepsilon.github.io/rustlib" class="library-sub-item">
                          Rust
                        </a>
                      </li>
                    
                  </ul>
                
            </li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/photos">照片</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/life">生活</a></li>
          
        
      
        
          
            <li class="nav-guide"><a  href="/">首页</a></li>
          
        
      
      
    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/about">关于</a></li>
      
    
      
        <li><a href="/tools">工具</a></li>
      
    
      
        <li><a href="/golib">库</a></li>
      
    
      
        <li><a href="/photos">照片</a></li>
      
    
      
        <li><a href="/life">生活</a></li>
      
    
      
        <li><a href="/">首页</a></li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://marcoepsilon.github.io/golib/log/log/">Log</a></h1>
  <div class="post-meta">
      
    <span class="post-date">
      2019-11-21
    </span>
    
    
    <span class="post-author">::
      Marco Epsilon
    </span>
    
  </div>

  
  <span class="post-tags">
    
    #<a href="https://marcoepsilon.github.io/tags/golang/">golang</a>&nbsp;
    
    #<a href="https://marcoepsilon.github.io/tags/library/">library</a>&nbsp;
    
    #<a href="https://marcoepsilon.github.io/tags/log/">log</a>&nbsp;
    
  </span>
  

  

  <div class="post-content">
    

<h1 id="overview">Overview</h1>

<span style="color:#eed202; " class="plain_text plain_text_default">
    
包log实现简单的日志包,它定义的类型Logger,包含一些格式化输出的方法,它还有预定义的易访问的标准"Logger",通过帮助函数 Print[f|ln],Fatal[f|ln],Panic[f|ln]，比手动地创建Logger更简单,日志库写入标准错误且在日志消息中打印每个日期和时间.每个日志消息由换行符分割,如果打印的消息没有换行符,日志器将会增加一个,Fatal函数将写入日志消息后调用os.Exit(1),Panic函数将会在写入日志消息后调用panic

</span>

<h1 id="常量-constants">常量(Constants)</h1>

<span style="color:#eed202; " class="plain_text plain_text_default">
    
<br/>
<pre><code class="language-go">const (
    Ldate = 1 &lt;&lt; itoa // 本地时区日期: 2009/01/23
    Ltime // 本地时区时间: 01:23:23
    Lmicroseconds // 微秒精度: 01:23:23.123123, 假定Ltime
    Llongfile // 充分的文件名和行号: /a/b/c/d.go:23
    Lshortfile // 最后的文件名和行号: d.go:23
    LUTC // 如果Ldate或Ltime被设置,使用UTC时区而不是本地时区
    LstdFlags = Ldate | Ltime // 标准日志器的初始值
)
</code></pre>

<p>这些flags定义了由日志器产生的每个消息的文本前缀条目,位的顺序共同控制打印的格式,这里无法控制它们出现的顺序或它们呈现的格式(注释中的格式),当Llongfile或Lshortfile指定时,前缀指定着冒号,比如Ldate|Ltime(LstdFlags)产生的.</p>

<pre><code class="language-go">2009/01/23 01:23:23 message
</code></pre>

<p>而Ldate|Ltime|Lmicrosceonds|Llongfile产生的.</p>

<pre><code class="language-go">2009/01/23 01:23:23.123123 /a/b/c/d.go: message
</code></pre>


</span>

<h1 id="函数-functions">函数(Functions)</h1>

<span style="color:#eed202; " class="plain_text plain_text_default">
    
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Fatal(v ...interface{})

</p>
Fatal等价于调用Print紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Fatalf(format string, v ...interface{})

</p>
Fatalf等价于调用Printf紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Fatalln(v ...interface{})

</p>
Fatalln等价于调用Println紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Flags() int

</p>
Flags返回标准日志器的输出flags
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Output(calldepth int, s string) error

</p>
对于日志事件,Output写入输出,字符串s包含写入日志的通过日志器flags指定的文本前缀,如果s结尾无换行符将会追加换行符,调用深度是跳过的帧数计数当计算文件名和行号如果Llongfile或Lshortfile设置,为了将会打印调用者Output的细节.
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Panic(v ..interface{})

</p>
等价于调用Print紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Panicf(format string, v ...interface{})

</p>
Panicf等价于调用Printf紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Panicln(v ...interface{})

</p>
Panicln等价于调用Println紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Prefix() string

</p>
返回标准日志器的输出前缀
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Print(v ...interface{})

</p>
Print打印输出到标准日志器,参数由fmt.Print处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Printf(format string, v ...interface{})

</p>
Printf打印输出到标准日志器,参数由fmt.Printf处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Println(v ...interface{})

</p>
Println打印输出到标准日志器,参数有fmt.Println处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func SetFlags(flag int)

</p>
SetFlags设置标准输出的输出标志
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func SetOutput(w io.Writer)

</p>
SetOutput设置标准日志器的输出目的地
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func SetPrefix(s string)

</p>
SetPrefix设置标准日志器的输出前缀
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func Writer() io.Writer

</p>
返回标准日志器的输出目的地

</span>

<h1 id="type-logger">type Logger</h1>

<span style="color:#eed202; " class="plain_text plain_text_default">
    
<br/>
<pre><code class="language-go">type Logger struct {
    // contains filtered or unexported fields
}
</code></pre>

<p>Logger表示一个活跃的日志对象产生输出行到io.Writer,每个日志操作都会作出一个简单Writer的Write方法调用,日志器能够保证被多个goroutine使用,它保证使用Writer序列化.</p>

<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func New(out io.Writer, prefix string, flags int) *Logger

</p>
New创建一个新的日志器,out指定日志器输出目的地,prefix指定日志器产生的输出前缀,flags定义了日志属性.
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Fatal(v ...interface{})

</p>
Fatal等价于调用Print紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Loggger) Fatalf(format string, v ...interface{})

</p>
Fatalf等价于调用Printf紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Fatalln(v ...interface{})

</p>
Fatalln等价于调用Println紧接着调用os.Exit(1)
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Flags() int

</p>
Flags返回该日志器的标准
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Output(calldepth int, s string) error

</p>
对于日志事件,Output写入输出,s包含日志器的前缀,如果文本结尾没有换行符,调用深度被用来恢复PC,尽管目前预定义路径将为2
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Panic(v ...interface{})

</p>
Panic等价于调用Print后紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Panicf(format string, v ...interface{})

</p>
Panicf等价于调用Printf紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Panicln(v ...interface{})

</p>
Panicln等价于调用Println紧接着调用panic
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Prefix() string

</p>
返回该日志器的前缀
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Print(v ...interface{})

</p>
Print调用l.Output打印到日志,参数由fmt.Print处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Printf(format string, v ...interface{})

</p>
Printf调用l.Output打印到日志,参数由fmt.Printf处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Println(v ...interface{})

</p>
Println调用l.Output打印到日志,参数由fmt.Println处理
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) SetFlags(flags int)

</p>
设置日志器标志
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) SetOutput(w io.Writer)

</p>
SetOutput设置日志器的输出目的地
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) SetPrefix(prefix string)

</p>
SetPrefix设置标准日志器的输出前缀
<p style="background-color:rgba(143,188,143,0.2); width:100%; color:#FFA500; border-radius: 10px; font-size:16px; padding:0.2rem 0; text-indent:1em; word-wrap:break-word;">
    
func (l *Logger) Writer() io.Writer

</p>
Writer返回日志器的输出目的地

</span>

<h1 id="examples">Examples</h1>

<span style="color:#eed202; " class="plain_text plain_text_default">
    
自定义Logger
<br/>
<pre><code class="language-go">package main

import (
	&quot;log&quot;
	&quot;bytes&quot;
	&quot;fmt&quot;
)

var (
	buf bytes.Buffer
	logger = log.New(&amp;buf, &quot;self logger: &quot;, log.LstdFlags)
)
func main() {
	logger.Println(&quot;hello, my logger&quot;)
	fmt.Print(buf.String())	
}
</code></pre>

</span>

  </div>
  
  <div style="margin-top:0px;" class="pagination">
    <div style="margin-top:10px;" class="pagination__title">
      <span
        class="pagination__title-h">Next Post</span>
      <hr />
    </div>
    <div class="pagination__buttons">
      
      <span class="button previous">
        <a href="https://marcoepsilon.github.io/golib/log/syslog/">
          <span class="button__icon">←</span>
          <span class="button__text">Syslog</span>
        </a>
      </span>
      
      
      <span class="button next">
        <a href="https://marcoepsilon.github.io/golib/sort/">
          <span class="button__text">Sort</span>
          <span class="button__icon">→</span>
        </a>
      </span>
      
    </div>
  </div>
  

  

<script src="https://utteranc.es/client.js"
        repo="MarcoEpsilon/marcoepsilon.github.io"
        issue-term="og:title"
        theme="photon-dark"
        crossorigin="anonymous"
        async>
</script>
</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright copyright--user">Marco Epsilon@Copyright</div>
    
  </div>
</footer>
<link rel="stylesheet" type="text/css" href="/assets/prism.css" />
<script src="https://marcoepsilon.github.io/assets/main.js"></script>
<script src="https://marcoepsilon.github.io/assets/prism.js"></script>



<div style="">
    <p style="width:100%; padding-left:25%; color:brown; font-size:23px;">
        我只知道一件事情
    </p>
    <p style="width:100%; padding-left:48%; color:coral; font-size:23px;">我什么都不知道</p>
</div>


  
</div>

</body>
</html>
